!function(e,t){"use strict";function n(e,t){for(var n,r=[],a=0;a<e.length;++a){if(n=o[e[a]]||i(e[a]),!n)throw"module definition dependecy not found: "+e[a];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){o[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}var o={};r("tinymce/tableplugin/Utils",["tinymce/Env"],function(e){function t(e,t){return parseInt(e.getAttribute(t)||1,10)}function n(t){(!e.ie||e.ie>10)&&(t.innerHTML='<br data-mce-bogus="1" />')}return{getSpanVal:t,paddCell:n}}),r("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(e,n,r){var i=e.each,o=r.getSpanVal;return function(a,s){function l(e){return e===a.getBody()}function c(){var e=0;M=[],P=0,i(["thead","tbody","tfoot"],function(t){var n=F.select("> "+t+" tr",s);i(n,function(n,r){r+=e,i(F.select("> td, > th",n),function(e,n){var i,a,s,l;if(M[r])for(;M[r][n];)n++;for(s=o(e,"rowspan"),l=o(e,"colspan"),a=r;r+s>a;a++)for(M[a]||(M[a]=[]),i=n;n+l>i;i++)M[a][i]={part:t,real:a==r&&i==n,elm:e,rowspan:s,colspan:l};P=Math.max(P,n+1)})}),e+=n.length})}function u(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function d(e,t){var n;return n=M[t],n?n[e]:void 0}function f(e,t,n){e&&(n=parseInt(n,10),1===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function h(e){return e&&(F.hasClass(e.elm,"mce-item-selected")||e==O)}function p(){var e=[];return i(s.rows,function(t){i(t.cells,function(n){return F.hasClass(n,"mce-item-selected")||O&&n==O.elm?(e.push(t),!1):void 0})}),e}function m(){var e=F.createRng();l(s)||(e.setStartAfter(s),e.setEndAfter(s),I.setRng(e),F.remove(s))}function g(t){var o,s={};return a.settings.table_clone_elements!==!1&&(s=e.makeMap((a.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var r;return 3==e.nodeType?(i(F.getParents(e.parentNode,null,t).reverse(),function(e){s[e.nodeName]&&(e=u(e,!1),o?r&&r.appendChild(e):o=r=e,r=e)}),r&&(r.innerHTML=n.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),t=u(t,!1),f(t,"rowSpan",1),f(t,"colSpan",1),o?t.appendChild(o):r.paddCell(t),t}function v(){var e,t=F.createRng();return i(F.select("tr",s),function(e){0===e.cells.length&&F.remove(e)}),0===F.select("tr",s).length?(t.setStartBefore(s),t.setEndBefore(s),I.setRng(t),void F.remove(s)):(i(F.select("thead,tbody,tfoot",s),function(e){0===e.rows.length&&F.remove(e)}),c(),void(L&&(e=M[Math.min(M.length-1,L.y)],e&&(I.select(e[Math.min(e.length-1,L.x)].elm,!0),I.collapse(!0)))))}function y(e,t,n,r){var i,o,a,s,l;for(i=M[t][e].elm.parentNode,a=1;n>=a;a++)if(i=F.getNext(i,"tr")){for(o=e;o>=0;o--)if(l=M[t+a][o].elm,l.parentNode==i){for(s=1;r>=s;s++)F.insertAfter(g(l),l);break}if(-1==o)for(s=1;r>=s;s++)i.insertBefore(g(i.cells[0]),i.cells[0])}}function b(){i(M,function(e,t){i(e,function(e,n){var r,i,a;if(h(e)&&(e=e.elm,r=o(e,"colspan"),i=o(e,"rowspan"),r>1||i>1)){for(f(e,"rowSpan",1),f(e,"colSpan",1),a=0;r-1>a;a++)F.insertAfter(g(e),e);y(n,t,i-1,r)}})})}function x(t,n,r){var o,a,s,l,u,p,m,g,y,x,C;if(t?(o=T(t),a=o.x,s=o.y,l=a+(n-1),u=s+(r-1)):(L=H=null,i(M,function(e,t){i(e,function(e,n){h(e)&&(L||(L={x:n,y:t}),H={x:n,y:t})})}),L&&(a=L.x,s=L.y,l=H.x,u=H.y)),g=d(a,s),y=d(l,u),g&&y&&g.part==y.part){for(b(),c(),g=d(a,s).elm,f(g,"colSpan",l-a+1),f(g,"rowSpan",u-s+1),m=s;u>=m;m++)for(p=a;l>=p;p++)M[m]&&M[m][p]&&(t=M[m][p].elm,t!=g&&(x=e.grep(t.childNodes),i(x,function(e){g.appendChild(e)}),x.length&&(x=e.grep(g.childNodes),C=0,i(x,function(e){"BR"==e.nodeName&&F.getAttrib(e,"data-mce-bogus")&&C++<x.length-1&&g.removeChild(e)})),F.remove(t)));v()}}function C(e){var n,r,a,s,l,c,d,p,m;if(i(M,function(t,r){return i(t,function(t){return h(t)&&(t=t.elm,l=t.parentNode,c=u(l,!1),n=r,e)?!1:void 0}),e?!n:void 0}),n!==t){for(s=0;s<M[0].length;s++)if(M[n][s]&&(r=M[n][s].elm,r!=a)){if(e){if(n>0&&M[n-1][s]&&(p=M[n-1][s].elm,m=o(p,"rowSpan"),m>1)){f(p,"rowSpan",m+1);continue}}else if(m=o(r,"rowspan"),m>1){f(r,"rowSpan",m+1);continue}d=g(r),f(d,"colSpan",r.colSpan),c.appendChild(d),a=r}c.hasChildNodes()&&(e?l.parentNode.insertBefore(c,l):F.insertAfter(c,l))}}function w(e){var t,n;i(M,function(n){return i(n,function(n,r){return h(n)&&(t=r,e)?!1:void 0}),e?!t:void 0}),i(M,function(r,i){var a,s,l;r[t]&&(a=r[t].elm,a!=n&&(l=o(a,"colspan"),s=o(a,"rowspan"),1==l?e?(a.parentNode.insertBefore(g(a),a),y(t,i,s-1,l)):(F.insertAfter(g(a),a),y(t,i,s-1,l)):f(a,"colSpan",a.colSpan+1),n=a))})}function _(){var t=[];l(s)&&1==M[0].length||(i(M,function(n){i(n,function(n,r){h(n)&&-1===e.inArray(t,r)&&(i(M,function(e){var t,n=e[r].elm;t=o(n,"colSpan"),t>1?f(n,"colSpan",t-1):F.remove(n)}),t.push(r))})}),v())}function N(){function e(e){var t,n;i(e.cells,function(e){var n=o(e,"rowSpan");n>1&&(f(e,"rowSpan",n-1),t=T(e),y(t.x,t.y,1,1))}),t=T(e.cells[0]),i(M[t.y],function(e){var t;e=e.elm,e!=n&&(t=o(e,"rowSpan"),1>=t?F.remove(e):f(e,"rowSpan",t-1),n=e)})}var t;t=p(),l(s)&&t.length==s.rows.length||(i(t.reverse(),function(t){e(t)}),v())}function k(){var e=p();if(!l(s)||e.length!=s.rows.length)return F.remove(e),v(),e}function E(){var e=p();return i(e,function(t,n){e[n]=u(t,!0)}),e}function S(e,t){var n=p(),r=n[t?0:n.length-1],o=r.cells.length;e&&(i(M,function(e){var t;return o=0,i(e,function(e){e.real&&(o+=e.colspan),e.elm.parentNode==r&&(t=1)}),t?!1:void 0}),t||e.reverse(),i(e,function(e){var n,i,a=e.cells.length;for(n=0;a>n;n++)i=e.cells[n],f(i,"colSpan",1),f(i,"rowSpan",1);for(n=a;o>n;n++)e.appendChild(g(e.cells[a-1]));for(n=o;a>n;n++)F.remove(e.cells[n]);t?r.parentNode.insertBefore(e,r):F.insertAfter(e,r)}),F.removeClass(F.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function T(e){var t;return i(M,function(n,r){return i(n,function(n,i){return n.elm==e?(t={x:i,y:r},!1):void 0}),!t}),t}function R(e){L=T(e)}function A(){var e,t;return e=t=0,i(M,function(n,r){i(n,function(n,i){var o,a;h(n)&&(n=M[r][i],i>e&&(e=i),r>t&&(t=r),n.real&&(o=n.colspan-1,a=n.rowspan-1,o&&i+o>e&&(e=i+o),a&&r+a>t&&(t=r+a)))})}),{x:e,y:t}}function B(e){var t,n,r,i,o,a,s,l,c,u;if(H=T(e),L&&H){for(t=Math.min(L.x,H.x),n=Math.min(L.y,H.y),r=Math.max(L.x,H.x),i=Math.max(L.y,H.y),o=r,a=i,u=n;a>=u;u++)e=M[u][t],e.real||t-(e.colspan-1)<t&&(t-=e.colspan-1);for(c=t;o>=c;c++)e=M[n][c],e.real||n-(e.rowspan-1)<n&&(n-=e.rowspan-1);for(u=n;i>=u;u++)for(c=t;r>=c;c++)e=M[u][c],e.real&&(s=e.colspan-1,l=e.rowspan-1,s&&c+s>o&&(o=c+s),l&&u+l>a&&(a=u+l));for(F.removeClass(F.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),u=n;a>=u;u++)for(c=t;o>=c;c++)M[u][c]&&F.addClass(M[u][c].elm,"mce-item-selected")}}function D(e,t){var n,r,i;n=T(e),r=n.y*P+n.x;do{if(r+=t,i=d(r%P,Math.floor(r/P)),!i)break;if(i.elm!=e)return I.select(i.elm,!0),F.isEmpty(i.elm)&&I.collapse(!0),!0}while(i.elm==e);return!1}var M,P,L,H,O,I=a.selection,F=I.dom;s=s||F.getParent(I.getStart(!0),"table"),c(),O=F.getParent(I.getStart(!0),"th,td"),O&&(L=T(O),H=A(),O=d(L.x,L.y)),e.extend(this,{deleteTable:m,split:b,merge:x,insertRow:C,insertCol:w,deleteCols:_,deleteRows:N,cutRows:k,copyRows:E,pasteRows:S,getPos:T,setStartCell:R,setEndCell:B,moveRelIdx:D,refresh:c})}}),r("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t,n,r){var i=n.each,o=r.getSpanVal;return function(a){function s(){function t(t){function n(e,n){var i=e?"previousSibling":"nextSibling",o=a.dom.getParent(n,"tr"),s=o[i];if(s)return g(a,n,s,e),t.preventDefault(),!0;var u=a.dom.getParent(o,"table"),d=o.parentNode,f=d.nodeName.toLowerCase();if("tbody"===f||f===(e?"tfoot":"thead")){var h=r(e,u,d,"tbody");if(null!==h)return l(e,h,n)}return c(e,o,i,u)}function r(e,t,n,r){var i=a.dom.select(">"+r,t),o=i.indexOf(n);if(e&&0===o||!e&&o===i.length-1)return s(e,t);if(-1===o){var l="thead"===n.tagName.toLowerCase()?0:i.length-1;return i[l]}return i[o+(e?-1:1)]}function s(e,t){var n=e?"thead":"tfoot",r=a.dom.select(">"+n,t);return 0!==r.length?r[0]:null}function l(e,n,r){var i=u(n,e);return i&&g(a,r,i,e),t.preventDefault(),!0}function c(e,r,i,o){var s=o[i];if(s)return d(s),!0;var l=a.dom.getParent(o,"td,th");if(l)return n(e,l,t);var c=u(r,!e);return d(c),t.preventDefault(),!1}function u(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?a.dom.getParent(n,"td,th"):n}function d(e){a.selection.setCursorLocation(e,0)}function f(){return b==e.UP||b==e.DOWN}function h(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function p(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=o(n,"colspan");return t}function m(e,t){var n=0,r=0;return i(e.children,function(e,i){return n+=o(e,"colspan"),r=i,n>t?!1:void 0}),r}function g(e,t,n,r){var i=p(a.dom.getParent(t,"td,th")),o=m(n,i),s=n.childNodes[o],l=u(s,r);d(l||s)}function v(e){var t=a.selection.getNode(),n=a.dom.getParent(t,"td,th"),r=a.dom.getParent(e,"td,th");return n&&n!==r&&y(n,r)}function y(e,t){return a.dom.getParent(e,"TABLE")===a.dom.getParent(t,"TABLE")}var b=t.keyCode;if(f()&&h(a)){var x=a.selection.getNode();setTimeout(function(){v(x)&&n(!t.shiftKey&&b===e.UP,x,t)},0)}}a.on("KeyDown",function(e){t(e)})}function l(){function e(e,t){var n,r=t.ownerDocument,i=r.createRange();return i.setStartBefore(t),i.setEnd(e.endContainer,e.endOffset),n=r.createElement("body"),n.appendChild(i.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}a.on("KeyDown",function(t){var n,r,i=a.dom;(37==t.keyCode||38==t.keyCode)&&(n=a.selection.getRng(),r=i.getParent(n.startContainer,"table"),r&&a.getBody().firstChild==r&&e(n,r)&&(n=i.createRng(),n.setStartBefore(r),n.setEndBefore(r),a.selection.setRng(n),t.preventDefault()))})}function c(){a.on("KeyDown SetContent VisualAid",function(){var e;for(e=a.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(a.settings.forced_root_block?a.dom.add(a.getBody(),a.settings.forced_root_block,a.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):a.dom.add(a.getBody(),"br",{"data-mce-bogus":"1"}))}),a.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||"\xa0"==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&a.dom.remove(t)})}function u(){function e(e,t,n,r){var i,o,a,s=3,l=e.dom.getParent(t.startContainer,"TABLE");return l&&(i=l.parentNode),o=t.startContainer.nodeType==s&&0===t.startOffset&&0===t.endOffset&&r&&("TR"==n.nodeName||n==i),a=("TD"==n.nodeName||"TH"==n.nodeName)&&!r,o||a}function t(){var t=a.selection.getRng(),n=a.selection.getNode(),r=a.dom.getParent(t.startContainer,"TD,TH");if(e(a,t,n,r)){r||(r=n);for(var i=r.lastChild;i.lastChild;)i=i.lastChild;3==i.nodeType&&(t.setEnd(i,i.data.length),a.selection.setRng(t))}}a.on("KeyDown",function(){t()}),a.on("MouseDown",function(e){2!=e.button&&t()})}function d(){function t(e){a.selection.select(e,!0),a.selection.collapse(!0)}function i(e){a.$(e).empty(),r.paddCell(e)}a.on("keydown",function(r){if((r.keyCode==e.DELETE||r.keyCode==e.BACKSPACE)&&!r.isDefaultPrevented()){var o,s,l,c;if(o=a.dom.getParent(a.selection.getStart(),"table")){if(s=a.dom.select("td,th",o),l=n.grep(s,function(e){return a.dom.hasClass(e,"mce-item-selected")}),0===l.length)return c=a.dom.getParent(a.selection.getStart(),"td,th"),void(a.selection.isCollapsed()&&c&&a.dom.isEmpty(c)&&(r.preventDefault(),i(c),t(c)));r.preventDefault(),a.undoManager.transact(function(){s.length==l.length?a.execCommand("mceTableDelete"):(n.each(l,i),t(l[0]))})}}})}d(),t.webkit&&(s(),u()),t.gecko&&(l(),c()),t.ie>10&&(l(),c())}}),r("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(e,t,n){return function(r){function i(e){r.getBody().style.webkitUserSelect="",(e||d)&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),d=!1)}function o(t){var n,i,o=t.target;if(!c&&s&&(a||o!=s)&&("TD"==o.nodeName||"TH"==o.nodeName)){i=u.getParent(o,"table"),i==l&&(a||(a=new e(r,i),a.setStartCell(s),r.getBody().style.webkitUserSelect="none"),a.setEndCell(o),d=!0),n=r.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(f){}t.preventDefault()}}var a,s,l,c,u=r.dom,d=!0;return r.on("MouseDown",function(e){2==e.button||c||(i(),s=u.getParent(e.target,"td,th"),l=u.getParent(s,"table"))}),r.on("mouseover",o),r.on("remove",function(){u.unbind(r.getDoc(),"mouseover",o)}),r.on("MouseUp",function(){function e(e,r){var o=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(r?i.setStart(e,0):i.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(r?i.setStartBefore(e):i.setEndBefore(e))}while(e=r?o.next():o.prev())}var i,o,c,d,f,h=r.selection;if(s){if(a&&(r.getBody().style.webkitUserSelect=""),o=u.select("td.mce-item-selected,th.mce-item-selected"),o.length>0){i=u.createRng(),d=o[0],i.setStartBefore(d),i.setEndAfter(d),e(d,1),c=new t(d,u.getParent(o[0],"table"));do if("TD"==d.nodeName||"TH"==d.nodeName){if(!u.hasClass(d,"mce-item-selected"))break;f=d}while(d=c.next());e(f),h.setRng(i)}r.nodeChanged(),s=a=l=null}}),r.on("KeyUp Drop SetContent",function(e){i("setcontent"==e.type),s=a=l=null,c=!1}),r.on("ObjectResizeStart ObjectResized",function(e){c="objectresized"!=e.type}),{clear:i}}}),r("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each;return function(r){function i(){var e=r.settings.color_picker_callback;return e?function(){var t=this;e.call(r,function(e){t.value(e).fire("change")},t.value())}:void 0}function o(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){d(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:i()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:i()}]}]}}function a(e){return e?e.replace(/px$/,""):""}function s(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function l(e){n("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},e)})}function c(e){n("top middle bottom".split(" "),function(t){r.formatter.remove("valign"+t,{},e)})}function u(t,n,r){function i(t,r){return r=r||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=i(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r}return i(t,r||[])}function d(e,t,n){var r=t.toJSON(),i=e.parseStyle(r.style);n?(t.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change")):(i["border-color"]=r.borderColor,i["background-color"]=r.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(i))))}function f(e,t,n){var r=e.parseStyle(e.getAttrib(n,"style"));r["border-color"]&&(t.borderColor=r["border-color"]),r["background-color"]&&(t.backgroundColor=r["background-color"]),t.style=e.serializeStyle(r)}function h(e,t,r){var i=e.parseStyle(e.getAttrib(t,"style"));n(r,function(e){i[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(i))))}var p=this;p.tableProps=function(){p.table(!0)},p.table=function(i){function c(){function n(e,t,r){if("TD"===e.tagName||"TH"===e.tagName)C.setStyle(e,t,r);else if(e.children)for(var i=0;i<e.children.length;i++)n(e.children[i],t,r)}var i;d(C,this),w=e.extend(w,this.toJSON()),w["class"]===!1&&delete w["class"],r.undoManager.transact(function(){if(m||(m=r.plugins.table.insertTable(w.cols||1,w.rows||1)),r.dom.setAttribs(m,{style:w.style,"class":w["class"]}),r.settings.table_style_by_css){if(x=[],x.push({name:"border",value:w.border}),x.push({name:"border-spacing",value:s(w.cellspacing)}),h(C,m,x),C.setAttribs(m,{"data-mce-border-color":w.borderColor,"data-mce-cell-padding":w.cellpadding,"data-mce-border":w.border}),m.children)for(var e=0;e<m.children.length;e++)n(m.children[e],"border",w.border),n(m.children[e],"padding",s(w.cellpadding))}else r.dom.setAttribs(m,{border:w.border,cellpadding:w.cellpadding,cellspacing:w.cellspacing});C.getAttrib(m,"width")&&!r.settings.table_style_by_css?C.setAttrib(m,"width",a(w.width)):C.setStyle(m,"width",s(w.width)),C.setStyle(m,"height",s(w.height)),i=C.select("caption",m)[0],i&&!w.caption&&C.remove(i),!i&&w.caption&&(i=C.create("caption"),i.innerHTML=t.ie?"\xa0":'<br data-mce-bogus="1"/>',m.insertBefore(i,m.firstChild)),l(m),w.align&&r.formatter.apply("align"+w.align,{},m),r.focus(),r.addVisual()})}function p(e,t){function n(e,n){for(var r=0;r<n.length;r++){var i=C.getStyle(n[r],t);if("undefined"==typeof e&&(e=i),e!=i)return""}return e}var i,o=r.dom.select("td,th",e);return i=n(i,o)}var m,g,v,y,b,x,C=r.dom,w={};i===!0?(m=C.getParent(r.selection.getStart(),"table"),m&&(w={width:a(C.getStyle(m,"width")||C.getAttrib(m,"width")),height:a(C.getStyle(m,"height")||C.getAttrib(m,"height")),cellspacing:a(C.getStyle(m,"border-spacing")||C.getAttrib(m,"cellspacing")),cellpadding:C.getAttrib(m,"data-mce-cell-padding")||C.getAttrib(m,"cellpadding")||p(m,"padding"),border:C.getAttrib(m,"data-mce-border")||C.getAttrib(m,"border")||p(m,"border"),borderColor:C.getAttrib(m,"data-mce-border-color"),caption:!!C.select("caption",m)[0],"class":C.getAttrib(m,"class")},n("left center right".split(" "),function(e){r.formatter.matchNode(m,"align"+e)&&(w.align=e)}))):(g={label:"Cols",name:"cols"},v={label:"Rows",name:"rows"}),r.settings.table_class_list&&(w["class"]&&(w["class"]=w["class"].replace(/\s*mce\-item\-table\s*/g,"")),y={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[e.value]})})})}),b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:r.settings.table_appearance_options!==!1?[g,v,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[g,v,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},y]},r.settings.table_advtab!==!1?(f(C,w,m),r.windowManager.open({title:"Table properties",data:w,bodyType:"tabpanel",body:[{title:"General",type:"form",items:b},o(C)],onsubmit:c})):r.windowManager.open({title:"Table properties",data:w,body:b,onsubmit:c})},p.merge=function(e,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();r.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},p.cell=function(){function t(){d(m,this),h=e.extend(h,this.toJSON()),r.undoManager.transact(function(){n(g,function(e){r.dom.setAttribs(e,{scope:h.scope,style:h.style,"class":h["class"]}),r.dom.setStyles(e,{width:s(h.width),height:s(h.height)}),h.type&&e.nodeName.toLowerCase()!=h.type&&(e=m.rename(e,h.type)),l(e),h.align&&r.formatter.apply("align"+h.align,{},e),c(e),h.valign&&r.formatter.apply("valign"+h.valign,{},e)}),r.focus()})}var i,h,p,m=r.dom,g=[];if(g=r.dom.select("td.mce-item-selected,th.mce-item-selected"),i=r.dom.getParent(r.selection.getStart(),"td,th"),!g.length&&i&&g.push(i),i=i||g[0]){h={width:a(m.getStyle(i,"width")||m.getAttrib(i,"width")),height:a(m.getStyle(i,"height")||m.getAttrib(i,"height")),scope:m.getAttrib(i,"scope"),"class":m.getAttrib(i,"class")},h.type=i.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(i,"align"+e)&&(h.align=e)}),n("top middle bottom".split(" "),function(e){r.formatter.matchNode(i,"valign"+e)&&(h.valign=e)}),r.settings.table_cell_class_list&&(p={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[e.value]})})})});var v={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},p]};r.settings.table_cell_advtab!==!1?(f(m,h,i),r.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:h,body:[{title:"General",type:"form",items:v},o(m)],onsubmit:t})):r.windowManager.open({title:"Cell properties",data:h,body:v,onsubmit:t})}},p.row=function(){function t(){var t,i,o;d(v,this),m=e.extend(m,this.toJSON()),r.undoManager.transact(function(){var e=m.type;n(y,function(n){r.dom.setAttribs(n,{scope:m.scope,style:m.style,"class":m["class"]}),r.dom.setStyles(n,{height:s(m.height)}),e!=n.parentNode.nodeName.toLowerCase()&&(t=v.getParent(n,"table"),i=n.parentNode,o=v.select(e,t)[0],o||(o=v.create(e),t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o)),o.appendChild(n),i.hasChildNodes()||v.remove(i)),l(n),m.align&&r.formatter.apply("align"+m.align,{},n)}),r.focus()})}var i,c,h,p,m,g,v=r.dom,y=[];i=r.dom.getParent(r.selection.getStart(),"table"),c=r.dom.getParent(r.selection.getStart(),"td,th"),n(i.rows,function(e){n(e.cells,function(t){return v.hasClass(t,"mce-item-selected")||t==c?(y.push(e),!1):void 0})}),h=y[0],h&&(m={height:a(v.getStyle(h,"height")||v.getAttrib(h,"height")),scope:v.getAttrib(h,"scope"),"class":v.getAttrib(h,"class")},m.type=h.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(h,"align"+e)&&(m.align=e)}),r.settings.table_row_class_list&&(p={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[e.value]})})})}),g={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},p]},r.settings.table_row_advtab!==!1?(f(v,m,h),r.windowManager.open({title:"Row properties",data:m,bodyType:"tabpanel",body:[{title:"General",type:"form",items:g},o(v)],onsubmit:t})):r.windowManager.open({title:"Row properties",data:m,body:g,onsubmit:t}))}}}),r("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(e,t,n,r,i,o,a,s){function l(i){function o(e){return function(){i.execCommand(e)}}function s(e,t){var n,r,o,s;for(o='<table id="__mce"><tbody>',n=0;t>n;n++){for(o+="<tr>",r=0;e>r;r++)o+="<td>"+(a.ie?" ":"<br>")+"</td>";o+="</tr>"}return o+="</tbody></table>",i.undoManager.transact(function(){i.insertContent(o),s=i.dom.get("__mce"),i.dom.setAttrib(s,"id",null),i.dom.setAttribs(s,i.settings.table_default_attributes||{}),i.dom.setStyles(s,i.settings.table_default_styles||{})}),s}function l(e,t){function n(){e.disabled(!i.dom.getParent(i.selection.getStart(),t)),i.selection.selectorChanged(t,function(t){e.disabled(!t)})}i.initialized?n():i.on("init",n)}function u(){l(this,"table")}function d(){l(this,"td,th")}function f(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;10>t;t++){e+="<tr>";for(var n=0;10>n;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function h(e,t,n){var r,o,a,s,l,c=n.getEl().getElementsByTagName("table")[0],u=n.isRtl()||"tl-tr"==n.parent().rel;for(c.nextSibling.innerHTML=e+1+" x "+(t+1),u&&(e=9-e),o=0;10>o;o++)for(r=0;10>r;r++)s=c.rows[o].childNodes[r].firstChild,l=(u?r>=e:e>=r)&&t>=o,i.dom.toggleClass(s,"mce-active",l),l&&(a=s);return a.parentNode}var p,m=this,g=new r(i);i.settings.table_grid===!1?i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:g.table}):i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),g.table())},onshow:function(){h(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");i.dom.removeClass(e,"mce-active"),i.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:f(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,r=e.target;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),n=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),(t!==this.lastX||n!==this.lastY)&&(h(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),i.undoManager.transact(function(){s(t.lastX+1,t.lastY+1)}),i.addVisual())}}]}),i.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:u,onclick:g.tableProps}),i.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:u,cmd:"mceTableDelete"}),i.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:o("mceTableCellProps"),onPostRender:d},{text:"Merge cells",onclick:o("mceTableMergeCells"),onPostRender:d},{text:"Split cell",onclick:o("mceTableSplitCells"),onPostRender:d}]}),i.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:o("mceTableInsertRowBefore"),onPostRender:d},{text:"Insert row after",onclick:o("mceTableInsertRowAfter"),onPostRender:d},{text:"Delete row",onclick:o("mceTableDeleteRow"),onPostRender:d},{text:"Row properties",onclick:o("mceTableRowProps"),onPostRender:d},{text:"-"},{text:"Cut row",onclick:o("mceTableCutRow"),onPostRender:d},{text:"Copy row",onclick:o("mceTableCopyRow"),onPostRender:d},{text:"Paste row before",onclick:o("mceTablePasteRowBefore"),onPostRender:d},{text:"Paste row after",onclick:o("mceTablePasteRowAfter"),onPostRender:d}]}),i.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:o("mceTableInsertColBefore"),onPostRender:d},{text:"Insert column after",onclick:o("mceTableInsertColAfter"),onPostRender:d},{text:"Delete column",onclick:o("mceTableDeleteCol"),onPostRender:d}]});var v=[];c("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"==e?v.push({text:"-"}):v.push(i.menuItems[e])}),i.addButton("table",{type:"menubutton",title:"Table",menu:v}),a.isIE||i.on("click",function(e){e=e.target,"TABLE"===e.nodeName&&(i.selection.select(e),i.nodeChanged())}),m.quirks=new t(i),i.on("Init",function(){m.cellSelection=new n(i)}),i.on("PreInit",function(){i.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),c({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=i.dom.getParent(i.selection.getStart(),"th,td"),i.dom.select("td.mce-item-selected,th.mce-item-selected").length?e.merge():g.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){p=e.cutRows()},mceTableCopyRow:function(e){p=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(p,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(p)},mceTableDelete:function(e){e.deleteTable()}},function(t,n){i.addCommand(n,function(){var n=new e(i);n&&(t(n),i.execCommand("mceRepaint"),m.cellSelection.clear())})}),c({mceInsertTable:g.table,mceTableProps:function(){g.table(!0)},mceTableRowProps:g.row,mceTableCellProps:g.cell},function(e,t){i.addCommand(t,function(t,n){e(n)})}),i.settings.table_tab_navigation!==!1&&i.on("keydown",function(t){var n,r,o;9==t.keyCode&&(n=i.dom.getParent(i.selection.getStart(),"th,td"),n&&(t.preventDefault(),r=new e(i),o=t.shiftKey?-1:1,i.undoManager.transact(function(){!r.moveRelIdx(n,o)&&o>0&&(r.insertRow(),r.refresh(),r.moveRelIdx(n,o))})))}),m.insertTable=s}var c=i.each;s.add("table",l)})}(this);